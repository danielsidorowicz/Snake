<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Snake</title>
    <link rel="stylesheet" href="snake.css">
</head>

<body onkeydown="moveSnake(event)">
    <div class="all" id="all">
        <div class="game" id="game">

        </div>
    </div>
    <script>
        const game = document.getElementById('game')
        let game_array = []
        let direction = 'stopSnake'


        for (let y = 0; y < 21; y++) {
            let row_array = []
            for (let x = 0; x < 21; x++) {
                let div_game_panel = document.createElement('div')
                div_game_panel.classList.add('div_game_panel')
                div_game_panel.setAttribute('id', `div_game_game_panel${y}_${x}`)
                if (y == 0 || x == 0 || y == 20 || x == 20) {
                    div_game_panel.innerText = "X"
                    row_array.push('X')
                } else if (x == 10 && y == 10) {
                    div_game_panel.classList.add('snake')
                    row_array.push(2)
                } else {
                    row_array.push(0)
                }
                game.append(div_game_panel)
            }
            game_array.push(row_array)
        }
        console.log(game_array);

        function moveSnake(e) {
            let keyPressed = e.which

            console.log(keyPressed);
            if (keyPressed == 40) {
                console.log('dol');
                direction = 'down'
            } else if (keyPressed == 38) {
                console.log('gora');
                direction = 'up'
            } else if (keyPressed == 37) {
                console.log('lewo');
                direction = 'left'
            } else if (keyPressed == 39) {
                console.log('prawo');
                direction = 'right'
            }

        }

        let gamePlaying = setInterval(function () {
            if (direction == 'stopSnake') {
            } else if (direction == 'up') {
                for (let y = 0; y < 21; y++) {
                    for (let x = 0; x < 21; x++) {
                        if (game_array[y][x] != 0 && game_array[y][x] != 'a' && game_array[y][x] != 'X') {
                            game_array[y][x] = 0
                            document.getElementById(`div_game_game_panel${y}_${x}`).classList.remove('snake')
                            game_array[y - 1][x] = 1
                            document.getElementById(`div_game_game_panel${y - 1}_${x}`).classList.add('snake')
                        }
                    }
                }
            } else if (direction == 'down') {
                for (let y = 0; y < 21; y++) {
                    for (let x = 0; x < 21; x++) {
                        if (game_array[y][x] != 0 && game_array[y][x] != 'a') {
                            game_array[y][x] = 0
                            document.getElementById(`div_game_game_panel${y}_${x}`).classList.remove('snake')
                            game_array[y + 1][x] = 1
                            document.getElementById(`div_game_game_panel${y + 1}_${x}`).classList.add('snake')
                        }
                    }
                }
            } else if (direction == 'left') {
                for (let y = 0; y < 21; y++) {
                    for (let x = 0; x < 21; x++) {
                        if (game_array[y][x] != 0 && game_array[y][x] != 'a') {
                            game_array[y][x] = 0
                            document.getElementById(`div_game_game_panel${y}_${x}`).classList.remove('snake')
                            game_array[y][x - 1] = 1
                            document.getElementById(`div_game_game_panel${y}_${x - 1}`).classList.add('snake')
                        }
                    }
                }
            } else if (direction == 'right') {
                for (let y = 0; y < 21; y++) {
                    for (let x = 0; x < 21; x++) {
                        if (game_array[y][x] != 0 && game_array[y][x] != 'a') {
                            game_array[y][x] = 0
                            document.getElementById(`div_game_game_panel${y}_${x}`).classList.remove('snake')
                            game_array[y][x + 1] = 1
                            document.getElementById(`div_game_game_panel${y}_${x + 1}`).classList.add('snake')
                        }
                    }
                }
            }
        }, 200);
    </script>
</body>

</html>